{"version":3,"sources":["/Users/l.kuzenko/PERSONAL/ng-start/src/app/forms/components/custom-field-form/counter-input/counter-input.component.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  Component,\n  forwardRef,\n  Input,\n  Provider,\n  ChangeDetectionStrategy,\n  OnChanges,\n  SimpleChanges,\n} from \"@angular/core\";\nimport { NG_VALUE_ACCESSOR, ControlValueAccessor, FormControl, NG_VALIDATORS } from \"@angular/forms\";\n\nexport const COUNTER_VALUE_ACCESSOR: Provider = [\n  {\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => CounterInputComponent),\n    multi: true,\n  },\n  { provide: NG_VALIDATORS, useExisting: forwardRef(() => CounterInputComponent), multi: true },\n];\n\nexport function createCounterRangeValidator(maxValue: number, minValue: number) {\n  return (c: FormControl) => {\n    const err = {\n      rangeError: {\n        given: c.value,\n        max: maxValue || 10,\n        min: minValue || 0,\n      },\n    };\n\n    return c.value > +maxValue || c.value < +minValue ? err : null;\n  };\n}\n\n@Component({\n  selector: \"bb-counter-input\",\n  templateUrl: \"./counter-input.component.html\",\n  styleUrls: [\"./counter-input.component.scss\"],\n  providers: [...COUNTER_VALUE_ACCESSOR],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class CounterInputComponent implements OnChanges, ControlValueAccessor {\n  // eslint-disable-next-line @angular-eslint/no-input-rename\n  @Input(\"counterValue\") _counterValue = 0;\n  @Input() counterRangeMax;\n  @Input() counterRangeMin;\n\n  propagateChange: any = () => {};\n  validateFn: any = () => {};\n\n  get counterValue() {\n    return this._counterValue;\n  }\n\n  set counterValue(val: number) {\n    this._counterValue = val;\n    this.propagateChange(val);\n  }\n\n  public ngOnChanges(inputs: SimpleChanges) {\n    if (inputs.counterRangeMax || inputs.counterRangeMin) {\n      this.validateFn = createCounterRangeValidator(this.counterRangeMax, this.counterRangeMin);\n    }\n  }\n\n  writeValue(value: number) {\n    if (value) {\n      this.counterValue = value;\n    }\n  }\n\n  registerOnChange(fn: () => {}) {\n    this.propagateChange = fn;\n  }\n\n  registerOnTouched() {}\n\n  increase() {\n    this.counterValue++;\n  }\n\n  decrease() {\n    this.counterValue--;\n  }\n\n  validate(c: FormControl) {\n    return this.validateFn(c);\n  }\n}\n"]}