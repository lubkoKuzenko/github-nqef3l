{"version":3,"sources":["/Users/l.kuzenko/PERSONAL/ng-start/src/app/rxjs/containers/rxjs/rxjs.component.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","sourcesContent":["import { Component, OnInit, ViewChild, ElementRef, AfterViewInit } from \"@angular/core\";\nimport { timer, Observable, of, concat, fromEvent, BehaviorSubject } from \"rxjs\";\nimport { TodosService } from \"../../services/todos.service\";\nimport { ITodo } from \"../../interfaces\";\nimport { map, tap, switchMap, scan } from \"rxjs/operators\";\nimport { HttpClient } from \"@angular/common/http\";\n\nexport const enum TlcDeviceEnum {\n  OCIT = \"ocit\",\n  OCIT_C = \"ocit-c\",\n  STCIP = \"stcip\",\n}\n\n@Component({\n  selector: \"bb-rxjs\",\n  templateUrl: \"./rxjs.component.html\",\n  styleUrls: [\"./rxjs.component.scss\"],\n})\nexport class RxjsComponent implements OnInit, AfterViewInit {\n  @ViewChild(\"button\", { static: true }) button: ElementRef;\n  @ViewChild(\"imageButton\", { static: true }) imageButton: ElementRef;\n\n  private _total$ = new BehaviorSubject<any>({\n    [TlcDeviceEnum.OCIT]: 0,\n    [TlcDeviceEnum.OCIT_C]: 1,\n    [TlcDeviceEnum.STCIP]: 2,\n  });\n  public total$ = this._total$.asObservable();\n\n  public completed$: Observable<ITodo[]>;\n  public inProgress$: Observable<ITodo[]>;\n  public randomImage$: Observable<any>;\n\n  constructor(public todosService: TodosService, private httpClient: HttpClient) {}\n\n  ngOnInit() {\n    // this.simpleRxDefinition();\n    // this.createTwoStreamsFromOne();\n    // this.contactTwoIntoOne();\n    this.calculateFromStream();\n  }\n\n  ngAfterViewInit(): void {\n    fromEvent(this.button.nativeElement, \"click\")\n      .pipe(\n        tap((e) => console.log(e)),\n        // concatMap(() => this.todosService.getTodos()),\n        // mergeMap(() => this.todosService.getTodos()),\n        // exhaustMap(() => this.todosService.getTodos()),\n        switchMap(() => this.todosService.getTodos()),\n      )\n      .subscribe();\n\n    this.onImageChange();\n  }\n\n  private calculateFromStream() {\n    const t$ = this.total$.pipe(\n      scan((acc, curr) => {\n        for (var key of Object.keys(curr)) {\n          if (curr[key] > 0) {\n            acc += 1;\n          }\n        }\n        return acc;\n      }, 0),\n    );\n\n    t$.subscribe((t) => console.log(t));\n  }\n\n  public onImageChange() {\n    this.randomImage$ = fromEvent(this.imageButton.nativeElement, \"click\").pipe(\n      map((d) => this.randomNumber(1, 100)),\n      switchMap((id) => {\n        if (id) {\n          return this.todosService.getPhotoById(id);\n        } else {\n          return of({});\n        }\n      }),\n    );\n  }\n\n  public contactTwoIntoOne() {\n    const stream1$ = of(1, 2, 3);\n    const stream2$ = timer(0, 1000);\n    const stream3$ = of(4, 5, 6);\n\n    const result$ = concat(stream1$, stream2$, stream3$);\n\n    result$.subscribe(console.log);\n  }\n\n  public fireClientError(it: any) {\n    // throw new Error('Client Error. Shit happens :)');\n    // it is not defined, ups\n    return it.happens;\n  }\n\n  public fireServerError() {\n    this.httpClient.get(\"https://jsonplaceholder.typicode.com/1\").subscribe();\n  }\n\n  private simpleRxDefinition() {\n    // create Observable\n    const timer$ = timer(0, 1000);\n\n    timer$.subscribe(\n      (v) => console.log(v),\n      (err) => console.log(err),\n      () => console.log(\"Completed\"),\n    );\n  }\n\n  private createTwoStreamsFromOne() {\n    // uncomment HTML\n    // map, tap\n    this.completed$ = this.todosService.getTodos().pipe(\n      tap((d) => console.log(d)),\n      map((todos: ITodo[]) => todos.filter((todo: ITodo) => todo.completed)),\n    );\n\n    this.inProgress$ = this.todosService\n      .getTodos()\n      .pipe(map((todos: ITodo[]) => todos.filter((todo: ITodo) => !todo.completed)));\n  }\n\n  // Function to generate random number\n  private randomNumber(min, max) {\n    return Math.floor(Math.random() * (max - min) + min);\n  }\n}\n"]}